!function(t){var o={};function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,o,e){a.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:e})},a.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},a.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(o,"a",o),o},a.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},a.p="",a(a.s=6)}([function(t,o){t.exports=function(t){new class{constructor(t){void 0==t&&(t="发生位置错误"),"string"==typeof t&&(t={content:t}),this.options=t}show(){var t=$('<div class="modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">提示</h4></div><div class="modal-body"><p>'+this.options.content+'</p></div><div class="modal-footer"><button type="button" class="btn btn-primary">确定</button></div></div></div></div>');$("body").append(t),t.modal("show"),t.on("click",".btn-primary",function(){t.modal("hide")}),t.on("hidden.bs.modal",function(o){t.remove(),this.options.onClose&&this.options.onClose()}.bind(this))}}(t).show()}},function(t,o){t.exports=(t=>{new class{constructor(t){this.option=$.extend({title:"提示",content:"",onCancel:null,onConfirm:null}.options)}show(){var t=$('<div class="modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">'+this.options.title+'</h4></div><div class="modal-body"><p>'+this.options.content+'</p></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">取消</button> <button type="button" class="btn btn-primary">确定</button></div></div></div></div>');$("body").append(t),t.modal("show"),t.on("click",".btn-primary",function(){t.modal("hide"),this.options.onConfirm&&this.options.onConfirm()}.bind(this)),t.on("hidden.bs.modal",function(o){t.remove(),this.options.onCancel&&this.options.onCancel()}.bind(this))}}(t).show()})},,,,function(t,o){function a(t){switch(this.options=$.extend({title:"提示",formid:"",content:"",onClose:null,size:"normal"},t),this.options.size){case"big":this.options.size="modal-lg";break;case"smaill":this.options.size="modal-sm";break;default:this.options.size=""}}a.prototype.show=function(){var t=this.html=$('<div class="modal fade"><div class="modal-dialog '+this.options.size+'"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">'+this.options.title+'</h4></div><form action="" id="'+this.options.formid+'"><div class="modal-body"></div><div class="modal-footer"><button type="button" class="btn btn-default form_cancel_btn"><span class="fui-cross"></span> 取消</button><button type="submit" class="btn btn-primary form_submit_btn"><span class="fui-check"></span> 确定</button></div></form></div></div></div>');$(".modal-body",t).append(this.options.content),$("body").append(t),t.modal("show"),t.on("click",".form_cancel_btn",function(){t.modal("hide")}),t.on("hidden.bs.modal",function(o){t.remove(),this.options.onClose&&this.options.onClose()}.bind(this))},a.prototype.close=function(){this.html.modal("hide")},t.exports=a},function(t,o,a){const e=a(0),n=(a(1),a(5));$("#create_page_btn").click(function(){$("#create_page_template").modal("show"),$("#create_page_form").on("submit",function(t){return t.preventDefault(),function(t,o){var a=$.trim($("#page_name").val()),n=$("#extra_js").is(":checked"),s=$("#extra_less").is(":checked"),i=$("#page_layout").val();if("libs"==a&&(n||s))return e("不要建立名为libs的js和css文件"),!1;$.ajax({url:"/page/create_page",type:"POST",dataType:"json",data:{page_name:a,extra_js:n,extra_less:s,page_layout:i}}).done(function(o){console.log(o),o.re&&t&&t()}).fail(function(t){o&&o()})}(function(){$("#create_page_template").modal("hide"),location.reload()},function(t){console.info(t),e(t)}),!1})}),$("#create_layout_btn").click(function(){$("#create_layout_template").modal("show"),$("#create_layout_form").on("submit",function(t){var o,a,n;t.preventDefault(),o=function(){$("#create_layout_form").modal("hide"),location.reload()},a=function(t){console.info(t),e(t)},n=$.trim($("#layout_name").val()),$.ajax({url:"/page/create_layout",type:"POST",dataType:"json",data:{layout_name:n}}).done(function(t){t.re?o&&o():a&&a(t.message)}).fail(function(t){a&&a(t.message)})})}),$("#create_partial_btn").click(function(){$("#create_partial_template").modal("show"),$("#create_partial_form").on("submit",function(t){var o,a,n;t.preventDefault(),o=function(){$("#create_partial_template").modal("hide"),location.reload()},a=function(t){console.info(t),e(t)},n=$.trim($("#partial_name").val()),$.ajax({url:"/page/create_partial",type:"POST",dataType:"json",data:{partial_name:n}}).done(function(t){t.re?o&&o():a&&a(t.message)}).fail(function(t){a&&a(t.message)})})}),$("body").on("click",".page_data_btn",function(){let t=$(this).data("path"),o=$(this).data("filename");$.ajax({url:"/page/get_page_data",type:"GET",dataType:"json",data:{pagePath:t},success(a){console.log(a);let s=new n({title:o+"页面数据",formid:"edit_pagedata_form",content:'<div class="form-group">\n                                <label class="control-label" for="page_data">模板数据 <span class="required">*</span></label>\n                                <textarea class="form-control code" id="page_data" type="text" required></textarea>\n                            </div>'});var i,l,d,c;s.show(),$("#page_data").val(JSON.stringify(a.result)),$("#edit_pagedata_form").on("submit",o=>{o.preventDefault();let a=$("#page_data").val();if(""!==$.trim(a)){try{a=JSON.parse(a)}catch(t){return e("json格式化数据不正确"),!1}i=t,a=a,d=(()=>{s.close()}),c=(t=>{e(t)}),console.log(a,123),a=JSON.stringify(a),console.log(a,234234),$.ajax({url:"/page/save_page_data",type:"POST",dataType:"json",data:{filePath:i,pageData:a},success(t){t.re?d&&d():c&&c(t.message)},error(t){c&&c(t.message)}})}else e("数据不能为空")})}})})}]);